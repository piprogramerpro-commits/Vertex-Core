<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>VERTEX CORE AI</title>
    <style>
        :root { --cyan: #00f2ff; --bg: #05070a; --sidebar: #0d1117; --border: #1f242d; }
        body { background: var(--bg); color: #c9d1d9; font-family: 'Segoe UI', sans-serif; margin: 0; display: flex; height: 100vh; overflow: hidden; }

        /* REGISTRO TIPO B√öNKER */
        #auth-layer { position: fixed; inset: 0; background: rgba(0,0,0,0.9); backdrop-filter: blur(25px); z-index: 1000; display: flex; justify-content: center; align-items: center; }
        .auth-card { background: rgba(22, 27, 34, 0.9); padding: 50px; border: 1px solid var(--cyan); border-radius: 20px; width: 420px; text-align: center; box-shadow: 0 0 50px rgba(0,242,255,0.15); }

        /* SIDEBAR ANCHA (320px) */
        .sidebar { width: 320px; background: var(--sidebar); border-right: 1px solid var(--border); display: flex; flex-direction: column; }
        .logo { padding: 45px 35px; font-size: 28px; font-weight: bold; color: var(--cyan); letter-spacing: 4px; border-bottom: 1px solid var(--border); }
        .nav-item { padding: 18px 35px; cursor: pointer; color: #8b949e; transition: 0.3s; border-left: 5px solid transparent; display: flex; align-items: center; gap: 15px; font-size: 16px; }
        .nav-item:hover, .nav-item.active { background: rgba(0,242,255,0.05); color: var(--cyan); border-left-color: var(--cyan); }

        /* LISTA CONVERSACIONES */
        .conv-history { flex-grow: 1; padding: 30px; overflow-y: auto; }
        .conv-label { font-size: 11px; color: #484f58; text-transform: uppercase; margin-bottom: 25px; letter-spacing: 2px; }
        .conv-item { padding: 12px; border-radius: 10px; font-size: 14px; color: #8b949e; cursor: pointer; margin-bottom: 12px; border: 1px solid transparent; }
        .conv-item:hover { background: #161b22; border-color: var(--border); color: #fff; }

        /* √ÅREA CHAT */
        .main-view { flex-grow: 1; display: flex; flex-direction: column; background: #0d1117; position: relative; }
        .section { display: none; height: 100%; flex-direction: column; }
        .active-section { display: flex; }

        #chat-window { flex-grow: 1; padding: 50px; overflow-y: auto; display: flex; flex-direction: column; gap: 25px; }
        .bubble { max-width: 75%; padding: 20px 25px; border-radius: 22px; line-height: 1.6; font-size: 16px; }
        .ai { align-self: flex-start; background: rgba(33, 38, 45, 0.85); border: 1px solid var(--cyan); color: #fff; border-bottom-left-radius: 2px; }
        .user { align-self: flex-end; background: #f0f6fc; color: #000; border-bottom-right-radius: 2px; }

        /* INPUT√ÅREA */
        .input-area { padding: 40px; border-top: 1px solid var(--border); background: var(--bg); }
        .input-wrap { display: flex; background: #161b22; border: 1px solid var(--border); border-radius: 18px; padding: 15px 25px; gap: 20px; align-items: center; }
        input { flex-grow: 1; background: transparent; border: none; color: white; outline: none; font-size: 16px; }
        .btn-send { background: var(--cyan); color: #000; border: none; padding: 12px 30px; border-radius: 10px; font-weight: bold; cursor: pointer; }

        .footer-quote { position: absolute; bottom: 15px; width: 100%; text-align: center; color: #484f58; font-size: 12px; }
    </style>
</head>
<body>

    <div id="auth-layer">
        <div class="auth-card">
            <h1 style="color:var(--cyan); margin-bottom:10px;">VERTEX CORE</h1>
            <p style="color:#8b949e; margin-bottom:35px;">IDENTIFICACI√ìN DE SOCIO</p>
            <input type="text" placeholder="Socio ID" style="width:100%; padding:15px; margin-bottom:15px; background:#05070a; border:1px solid var(--border); color:white; border-radius:10px;">
            <input type="password" placeholder="Pass-Key" style="width:100%; padding:15px; margin-bottom:30px; background:#05070a; border:1px solid var(--border); color:white; border-radius:10px;">
            <button class="btn-send" style="width:100%" onclick="validar()">INGRESAR AL SISTEMA</button>
        </div>
    </div>

    <div class="sidebar">
        <div class="logo">VERTEX OS</div>
        <div id="nav-chat" class="nav-item active" onclick="tab('chat', 'nav-chat')">üè† Panel Principal</div>
        <div id="nav-conf" class="nav-item" onclick="tab('conf', 'nav-conf')">‚öôÔ∏è Configuraci√≥n</div>
        <div id="nav-sec" class="nav-item" onclick="tab('sec', 'nav-sec')">üõ°Ô∏è Seguridad</div>
        <div class="conv-history">
            <div class="conv-label">HISTORIAL</div>
            <div class="conv-item">‚óè Dilema de Nash v2.4</div>
            <div class="conv-item">‚óè An√°lisis de Clima Local</div>
        </div>
        <div style="padding:35px; border-top:1px solid var(--border); color:var(--cyan); font-weight: bold;">
            SPARKS: <span id="spark-count">20</span>
        </div>
    </div>

    <div class="main-view">
        <div id="chat" class="section active-section">
            <div id="chat-window">
                <div class="bubble ai">Identificaci√≥n confirmada. N√∫cleo operativo. ¬øDirectivas, socio?</div>
            </div>
            <div class="input-area">
                <div class="input-wrap">
                    <input type="text" id="user-msg" placeholder="Ingrese consulta de alta prioridad...">
                    <button class="btn-send" onclick="enviar()">ENVIAR</button>
                </div>
            </div>
        </div>
        <div id="conf" class="section" style="padding:60px;">
            <h2 style="color:var(--cyan)">M√ìDULOS DEL N√öCLEO</h2>
            <div style="background:#161b22; padding:25px; border-radius:15px; border:1px solid var(--border);">
                <p>IA Engine: Llama 3 70B</p>
                <p>Status: Cloud Active</p>
                <button class="btn-send" style="background:#ff4d4d; color:white;" onclick="location.reload()">LOGOUT</button>
            </div>
        </div>
        <div id="sec" class="section" style="padding:60px;">
            <h2 style="color:var(--cyan)">DEFENSA DE DATOS</h2>
            <div style="background:#161b22; padding:25px; border-radius:15px; border:1px solid var(--border);">
                <p>Cifrado: AES-256 GCM</p>
                <p>Sesi√≥n: Blindada</p>
            </div>
        </div>
        <div class="footer-quote">"Discipline is everything."</div>
    </div>

    <script>
        function validar() {
            fetch('/auth', {method:'POST'}).then(res => res.json()).then(data => {
                document.getElementById('auth-layer').style.display = 'none';
            });
        }
        function tab(secId, btnId) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active-section'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            document.getElementById(secId).classList.add('active-section');
            document.getElementById(btnId).classList.add('active');
        }
        async function enviar() {
            const m = document.getElementById('user-msg');
            const cw = document.getElementById('chat-window');
            if(!m.value) return;
            cw.innerHTML += `<div class="bubble user">${m.value}</div>`;
            const res = await fetch('/chat', {
                method:'POST',
                headers:{'Content-Type':'application/json'},
                body: JSON.stringify({message: m.value})
            });
            const d = await res.json();
            cw.innerHTML += `<div class="bubble ai"><b>VERTEX:</b><br>${d.response}</div>`;
            document.getElementById('spark-count').innerText = d.sparks;
            m.value = ''; cw.scrollTop = cw.scrollHeight;
        }
    </script>
</body>
</html>
