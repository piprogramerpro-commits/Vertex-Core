<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>VERTEX CORE AI</title>
    <style>
        :root { --cyan: #00f2ff; --bg: #0b0e14; --card: #161b22; --border: #30363d; }
        body { background: var(--bg); color: #c9d1d9; font-family: sans-serif; margin: 0; display: flex; height: 100vh; }
        
        /* Dashboard de Registro (Lo primero que salta) */
        #auth-layer { position: fixed; inset: 0; background: var(--bg); z-index: 999; display: flex; justify-content: center; align-items: center; }
        .box { background: var(--card); padding: 30px; border: 1px solid var(--border); border-radius: 10px; text-align: center; width: 300px; }
        
        /* Interfaz Principal */
        #main-ui { display: none; width: 100%; height: 100vh; flex-direction: row; }
        .sidebar { width: 250px; background: var(--card); border-right: 1px solid var(--border); padding: 20px; }
        .content { flex-grow: 1; padding: 30px; display: flex; flex-direction: column; }
        #chat-window { flex-grow: 1; background: #0d1117; border-radius: 8px; padding: 20px; overflow-y: auto; border: 1px solid var(--border); margin-bottom: 20px; }
        
        .nav-item { padding: 12px; cursor: pointer; color: #8b949e; border-radius: 6px; margin-bottom: 5px; }
        .nav-item:hover { background: #21262d; color: var(--cyan); }
        .active { background: #21262d; color: var(--cyan); border-left: 3px solid var(--cyan); }
        
        .btn { background: var(--cyan); color: black; border: none; padding: 12px; border-radius: 6px; font-weight: bold; cursor: pointer; width: 100%; }
        input { width: 100%; padding: 12px; background: #0d1117; border: 1px solid var(--border); color: white; border-radius: 6px; margin-bottom: 10px; box-sizing: border-box; }
    </style>
</head>
<body>

    <div id="auth-layer">
        <div class="box">
            <h2 style="color:var(--cyan)">REGISTRO SOCIO</h2>
            <input type="text" id="u" placeholder="Nombre de Socio">
            <input type="email" id="e" placeholder="Email">
            <button class="btn" onclick="login()">VALIDAR IDENTIDAD</button>
        </div>
    </div>

    <div id="main-ui">
        <div class="sidebar">
            <h2 style="color:var(--cyan)">VERTEX</h2>
            <div class="nav-item active" onclick="show('chat')">üè† Panel Principal</div>
            <div class="nav-item" onclick="show('conf')">‚öôÔ∏è Configuraci√≥n</div>
            <div class="nav-item" onclick="show('sec')">üõ°Ô∏è Seguridad</div>
            <div style="margin-top:auto; color:var(--cyan)">SPARKS: <span id="spk">20</span></div>
        </div>
        <div class="content">
            <div id="chat" class="section">
                <div id="chat-window"></div>
                <div style="display:flex; gap:10px">
                    <input type="text" id="msg" placeholder="Consulta al n√∫cleo...">
                    <button class="btn" style="width:100px" onclick="send()">ENVIAR</button>
                </div>
            </div>
            <div id="conf" class="section" style="display:none">
                <h2>CONFIGURACI√ìN</h2>
                <p>Versi√≥n: v2.4.0-Stable</p>
                <p>Conexi√≥n: Cifrada (SSL)</p>
                <button class="btn" style="background:#ff4d4d; color:white" onclick="location.reload()">QUITAR CUENTA</button>
            </div>
            <div id="sec" class="section" style="display:none">
                <h2>SEGURIDAD</h2>
                <p>Capa 1: AES-256 Activa</p>
                <p>Capa 2: SHA-256 Activa</p>
            </div>
        </div>
    </div>

    <script>
        function login() {
            fetch('/auth', {method:'POST'}).then(() => {
                document.getElementById('auth-layer').style.display = 'none';
                document.getElementById('main-ui').style.display = 'flex';
            });
        }
        function show(id) {
            document.querySelectorAll('.section').forEach(s => s.style.display = 'none');
            document.getElementById(id).style.display = 'block';
        }
        async function send() {
            const m = document.getElementById('msg');
            const cw = document.getElementById('chat-window');
            cw.innerHTML += `<p><b>T√ö:</b> ${m.value}</p>`;
            const res = await fetch('/chat', {
                method:'POST',
                headers:{'Content-Type':'application/json'},
                body: JSON.stringify({message: m.value})
            });
            const d = await res.json();
            cw.innerHTML += `<p style="color:var(--cyan)"><b>VERTEX:</b> ${d.response}</p>`;
            if(d.sparks) document.getElementById('spk').innerText = d.sparks;
            m.value = '';
            cw.scrollTop = cw.scrollHeight;
        }
    </script>
</body>
</html>
