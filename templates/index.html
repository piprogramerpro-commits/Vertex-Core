<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>VERTEX CORE | SYSTEM ACCESS</title>
    <style>
        body { background: #0a0a0a; color: #d4af37; font-family: 'Courier New', monospace; display: flex; height: 100vh; margin: 0; overflow: hidden; }
        #chat-container { width: 60%; display: flex; flex-direction: column; border-right: 2px solid #d4af37; padding: 20px; }
        #terminal-container { width: 40%; background: #000; padding: 20px; font-size: 12px; color: #00ff00; overflow-y: auto; text-shadow: 0 0 5px #00ff00; }
        #messages { flex-grow: 1; overflow-y: auto; margin-bottom: 20px; padding-right: 10px; }
        .msg { margin-bottom: 15px; border-left: 2px solid #d4af37; padding-left: 10px; }
        .user { color: #fff; }
        .vertex { color: #d4af37; font-weight: bold; }
        input { background: #111; border: 1px solid #d4af37; color: #fff; padding: 15px; width: 90%; outline: none; }
        .term-line { margin-bottom: 2px; }
        .gold { color: #d4af37; }
    </style>
</head>
<body>
    <div id="chat-container">
        <h2>◆ VERTEX CORE INTERFACE ◆</h2>
        <div id="messages"></div>
        <input type="text" id="userInput" placeholder="Escribe un comando..." onkeypress="if(event.key==='Enter') send()">
    </div>
    
    <div id="terminal-container" id="terminal">
        <div class="term-line gold">[SYSTEM] Inicializando Vertex...</div>
        <div class="term-line">[LOG] Kernel: v2.4.0-Gold</div>
        <div class="term-line">[LOG] Redis: Connected</div>
        <div class="term-line">[LOG] Groq: Llama 3.3 Active</div>
        <div id="log-output"></div>
    </div>

    <script>
        function logToTerminal(text) {
            const out = document.getElementById('log-output');
            out.innerHTML += `<div class="term-line"> > ${text}</div>`;
            document.getElementById('terminal-container').scrollTop = out.scrollHeight;
        }

        async function send() {
            const input = document.getElementById('userInput');
            const query = input.value;
            if(!query) return;

            const msgDiv = document.getElementById('messages');
            msgDiv.innerHTML += `<div class="msg user"><b>TÚ:</b> ${query}</div>`;
            input.value = '';
            
            logToTerminal(`Enviando petición: ${query.substring(0,20)}...`);

            const res = await fetch('/ask', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({query: query, email: 'gemo@vertex.core'})
            });
            const data = await res.json();
            
            logToTerminal(`Respuesta recibida de Vertex.`);
            msgDiv.innerHTML += `<div class="msg vertex"><b>VERTEX:</b> ${data.vertex_response}</div>`;
            msgDiv.scrollTop = msgDiv.scrollHeight;
        }
    </script>
</body>
</html>
